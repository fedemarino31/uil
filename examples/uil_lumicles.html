<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Uil to Three</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="shortcut icon" href="./assets/favicon.ico">
    </head>
<style>
html{ overflow:hidden; width:100%; height:100%; }
body { font-family: "Lucida Console", Monaco, monospace; background-color:#717b84; font-size:11px; color:#fff; margin: 0px; }

</style>

</head>

<body>

<div id='content'></div>

<script type="module">
    

    // https://github.com/lo-th/uil

    import * as UIL from '../build/uil.module.js';
  
    let ui

    let params={
        currentModel:"cloud03.glb",
        currentCamera:"drone",
        speed:0.34,
        speedMapped:2.4,
        fov:45,
        focalDistance:1500,
        focalRange:2000,
        particleOpacity:1.5,
        particleSize:2.5,
        particleDOFSizeMultiplier:2,
        particleDOFOpacityDecay:0.3,
        gamma:1.1

    }

    window.params=params

    window.params = params;
    function initGUI () {

        // terrain
        
        ui = new UIL.Gui({w:128*4/*, maxHeight:128*4*/, isCanvas:false,addDOMEventListeners:true});


        let gCloud=ui.add("group",{name:"Cloud Model",bg:"#446666"})
        
        gCloud.add(params,"currentModel",{type:"list","displayName":"Model",list:["cloud1.glb","cloud2.glb","cloud3.glb"]})
        
        
        gCloud.add("button",{name:"",value:["Prev","Load","Next"],callback:(name)=>{console.log(name)}})
        gCloud.add(params,"totalParticles",{type:"list",displayName:"total particles",list:["250K","500K","1M","2M"]})
        gCloud.open();
        

        let gJson=ui.add("group",{name:"JSON Editor",bg:"#666644"})
        gJson.add("button",{name:"",value:["Reset","Export"],callback:(name)=>{console.log(name)}})
        gJson.add("button",{name:"UI initial state",value:["Test"],callback:(name)=>{console.log(name)}})
        gJson.add("button",{name:"Cameras",value:["Test orbital","Test Drone"],callback:(name)=>{console.log(name)}})
        gJson.open();

        let gCam=ui.add("group",{name:"Camera",bg:"#664444"})
        gCam.add(params,"currentCamera",{"type":"list",list:["orbital","drone"]})
        gCam.add(params,"fov",{displayName:"FOV",min:0,max:90,step:0.01})
        gCam.add(params,"focalDistance",{type:"slide",displayName:"focal distance",min:0,max:9000,step:0.01})
        gCam.add(params,"focalRange",{type:"slide",displayName:"focal range",min:0,max:9000,step:0.01})
        gCam.open();

        let gPart=ui.add("group",{name:"Particles",bg:"#444466"})
        gPart.add(params,"particleOpacity",{type:"slide",displayName:"opacity",min:0,max:10,step:0.01})
        gPart.add(params,"particleSize",{type:"slide",displayName:"size",min:0,max:10,step:0.01})
        gPart.add(params,"particleDOFSizeMultiplier",{type:"slide",displayName:"DOF size multiplier",min:0,max:5,step:0.01})
        gPart.add(params,"particleDOFOpacityDecay",{type:"slide",displayName:"DOF opacity decay",min:0,max:5,step:0.01})
        gPart.open();

        let gRender=ui.add("group",{name:"Rendering",bg:"#446644"})
        gRender.add(params,"gamma",{type:"slide",displayName:"gamma",min:0,max:2,step:0.01})
        gRender.add(params,"saturation",{type:"slide",displayName:"saturation",min:0,max:2,step:0.01})
        gRender.add(params,"hdrHigh",{type:"slide",displayName:"HDR high",min:0,max:1,step:0.01})
        gRender.add(params,"hdrLow",{type:"slide",displayName:"HDR low",min:0,max:1,step:0.01})
        gRender.add(params,"brightness",{type:"slide",displayName:"brightness",min:0,max:1,step:0.01})
        gRender.add(params,"bloom",{type:"slide",displayName:"bloom",min:0,max:1,step:0.01})
        gRender.open();

        //ui.add("button", { name: "setOrbitalCam", values: ["save", "load"] });        
        /*
        ui.add(params,"speed", { type:"slide", min: 0, max: 1, precision:3, name:"mongo",displayName:"speedFactor" })
            .onChange((v)=>{
                params.speedMapped = Math.pow(v,2)*10;
            }).listen();
        ui.add("slide", { name:"value1", min: 0, max: 1, precision:3, value:8 })
            */
        //ui.add('title', { name: 'LOD' }) 
        //ui.add('list', { name: 'defaultLOD', list: ['250K', '500K', '1M', '2M'], listOnly: false })        
        //ui.add('list', { name: 'includeEvery', list: ['1', '2', '4', '8'], listOnly: false })
        //ui.add("slide", { name: "minSize", min: 1, max: 50, step: 1,value:14 });


    }

    initGUI();


</script>
</body>
</html>